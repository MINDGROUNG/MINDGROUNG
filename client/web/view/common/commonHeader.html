<div class="headerWrap">
    <!-- before Login -->

    <!-- modal review&write -->
    <div class="modalPop">
        <div class="modalBack"></div>
        <div class="modalPopReview">
            <div class="writeForm">
                <div class="xMark">
                    <i class="xi-close"></i>
                </div>
                <h2><%=translation.mypage.Write_a_review%></h2>
            </div>
            <div class="content">
                <div class="label">
                    <textarea id="commentReviewText" name="" id="" cols="30" rows="10" placeholder="<%=translation.mypage.Enter_your_review%>"></textarea>
                    <div class="count500">
                        0 / 500
                    </div>
                </div>
                <div class="surveyChoice">
                    <div class="levelHeader">
                        <h2><%=translation.mypage.Class_Survey%></h2>
                        <p>
                            * <%=translation.mypage.You_can_evaluate_following_statement%> 
                        </p>
                    </div>
                    <p class="moText">
                        * <%=translation.mypage.You_can_evaluate_following_statement%> 
                    </p>
                    <div class="levelBody">
                        <article>
                            <h3>
                                1. <%=translation.mypage.Coming_up_with_hope_and_a_positive_attitude_throughout_life_I_have_the_momentum_or_more_momentum_to_start_something%>
                            </h3>
                            <div class="selectSurvey" style="position: relative;">
                                <ul class="btnPic">
                                    <li class = "surveySelectButton1" name="1">
                                        <div class="out">
                                            <div class="in"></div>
                                        </div>
                                    </li>
                                    <li class = "surveySelectButton1" name="2">
                                        <div class="out">
                                            <div class="in"></div>
                                        </div>
                                    </li>
                                    <li class = "surveySelectButton1" name="3">
                                        <div class="out">
                                            <div class="in"></div>
                                        </div>
                                    </li>
                                    <li class = "surveySelectButton1" name="4">
                                        <div class="out">
                                            <div class="in"></div>
                                        </div>
                                    </li>
                                    <li class = "surveySelectButton1" name="5">
                                        <div class="out">
                                            <div class="in"></div>
                                        </div>
                                    </li>
                                </ul>
                                <hr>
                                <ul class="step">
                                    <ol>
                                        <li>1</li>
                                        <li>2</li>
                                        <li>3</li>
                                        <li>4</li>
                                        <li>5</li>
                                    </ol>
                                </ul>
                            </div>
                        </article>
                        <article>
                            <h3>
                                2. <%=translation.mypage.I_enjoy_interacting%>
                            </h3>
                            <div class="selectSurvey" style="position: relative;">
                                <ul class="btnPic">
                                    <li  class = "surveySelectButton2" name="1">
                                        <div class="out">
                                            <div class="in"></div>
                                        </div>
                                    </li>
                                    <li  class = "surveySelectButton2" name="2">
                                        <div class="out">
                                            <div class="in"></div>
                                        </div>
                                    </li>
                                    <li class = "surveySelectButton2" name="3">
                                        <div class="out">
                                            <div class="in"></div>
                                        </div>
                                    </li>
                                    <li class = "surveySelectButton2" name="4">
                                        <div class="out">
                                            <div class="in"></div>
                                        </div>
                                    </li>
                                    <li class = "surveySelectButton2" name="5">
                                        <div class="out">
                                            <div class="in"></div>
                                        </div>
                                    </li>
                                </ul>
                                <hr>
                                <ul class="step">
                                    <ol>
                                        <li>1</li>
                                        <li>2</li>
                                        <li>3</li>
                                        <li>4</li>
                                        <li>5</li>
                                    </ol>
                                </ul>
                            </div>
                        </article>
                        <article>
                            <h3>
                                3. <%=translation.mypage.I_often_find_myself_working_hard_knowing_what_I_want_clearly_or_more_often_than_before%>
                            </h3>
                            <div class="selectSurvey" style="position: relative;">
                                <ul class="btnPic">
                                    <li class = "surveySelectButton3" name="1">
                                        <div class="out">
                                            <div class="in"></div>
                                        </div>
                                    </li>
                                    <li class = "surveySelectButton3" name="2">
                                        <div class="out">
                                            <div class="in"></div>
                                        </div>
                                    </li>
                                    <li class = "surveySelectButton3" name="3">
                                        <div class="out">
                                            <div class="in"></div>
                                        </div>
                                    </li>
                                    <li class = "surveySelectButton3" name="4">
                                        <div class="out">
                                            <div class="in"></div>
                                        </div>
                                    </li>
                                    <li class = "surveySelectButton3" name="5">
                                        <div class="out">
                                            <div class="in"></div>
                                        </div>
                                    </li>
                                </ul>
                                <hr>
                                <ul class="step">
                                    <ol>
                                        <li>1</li>
                                        <li>2</li>
                                        <li>3</li>
                                        <li>4</li>
                                        <li>5</li>
                                    </ol>
                                </ul>
                            </div>
                        </article>
                        <article>
                            <h3>
                                4. <%=translation.mypage.When_dealing_with_something_I_carefully_observe_and_analyze_and_I_have_a_more_discerning_view_of_morally_right_and_wrong%> 
                            </h3>
                            <div class="selectSurvey" style="position: relative;">
                                <ul class="btnPic">
                                    <li class = "surveySelectButton4" name="1">
                                        <div class="out">
                                            <div class="in"></div>
                                        </div>
                                    </li>
                                    <li class = "surveySelectButton4" name="2">
                                        <div class="out">
                                            <div class="in"></div>
                                        </div>
                                    </li>
                                    <li class = "surveySelectButton4" name="3">
                                        <div class="out">
                                            <div class="in"></div>
                                        </div>
                                    </li>
                                    <li class = "surveySelectButton4" name="4">
                                        <div class="out">
                                            <div class="in"></div>
                                        </div>
                                    </li>
                                    <li class = "surveySelectButton4" name="5">
                                        <div class="out">
                                            <div class="in"></div>
                                        </div>
                                    </li>
                                </ul>
                                <hr>
                                <ul class="step">
                                    <ol>
                                        <li>1</li>
                                        <li>2</li>
                                        <li>3</li>
                                        <li>4</li>
                                        <li>5</li>
                                    </ol>
                                </ul>
                            </div>
                        </article>
                        <article>
                            <h3>
                                5. <%=translation.mypage.I_focused_more_on_listening_rather_than_speaking_and_I_became_more_or_less_interested_in_reflection_and_exploring_my_inner_self%>
                            </h3>
                            <div class="selectSurvey" style="position: relative;">
                                <ul class="btnPic">
                                    <li class = "surveySelectButton5" name="1">
                                        <div class="out">
                                            <div class="in"></div>
                                        </div>
                                    </li>
                                    <li class = "surveySelectButton5" name="2">
                                        <div class="out">
                                            <div class="in"></div>
                                        </div>
                                    </li>
                                    <li class = "surveySelectButton5" name="3">
                                        <div class="out">
                                            <div class="in"></div>
                                        </div>
                                    </li>
                                    <li class = "surveySelectButton5" name="4">
                                        <div class="out">
                                            <div class="in"></div>
                                        </div>
                                    </li>
                                    <li class = "surveySelectButton5" name="5">
                                        <div class="out">
                                            <div class="in"></div>
                                        </div>
                                    </li>
                                </ul>
                                <hr>
                                <ul class="step">
                                    <ol>
                                        <li>1</li>
                                        <li>2</li>
                                        <li>3</li>
                                        <li>4</li>
                                        <li>5</li>
                                    </ol>
                                </ul>
                            </div>
                        </article>
                    </div>
                </div>
                <div class="complete">
                    <%=translation.mypage.Please_complete_the_class_survey_to_submit_your_review%>
                </div>
                <div class="btnReview" id="reviewSubmitButton">
                    <button>
                        <%=translation.mypage.Submit%>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- 메신저창 -->
    <div>

        <div class="msgModal " id = "msgModalWrap">
            <div class="msgTopInfo">
                <div class="userInfo">
                    <div class="ring">
                        <img src="/web/img/userRing/1.png" alt="">
                    </div>
                    <strong>
                        Hannah Brown
                    </strong>
                </div>
                <div class="msgModalCloseBtn">
                    <button>
                        <img src="/web/img/ICN_CLOSE_24.png" alt="">
                    </button>
                </div>
            </div>
            <div class="msgDetail">
                <p class="date">Mar 23, 2021, 10:59 PM</p>
                <div class="otherTalk">
                    <div class="ring">
                        <img src="/web/img/userRing/1.png" alt="">
                    </div>
                    <ul class="talks">
                        <li>Hello</li>
                        <li>Hello Hello Hello</li>
                    </ul>
                </div>
                <ul class="myTalk">
                    <li>Nice to meet you</li>
                    <li>Nice to meet you</li>
                </ul>
            </div>
            <div class="input-send">
                <div>
                    <input type="text" placeholder="Aa">
                    <button class="sendBtn">
                        Send
                    </button>
                </div>
            </div>
        </div>

        <div class="msgModal">
            <div class="msgTopInfo">
                <div class="userInfo">
                    <div class="ring">
                        <img src="/web/img/userRing/1.png" alt="">
                    </div>
                    <strong>
                        Hannah Brown
                    </strong>
                </div>
                <div class="msgModalCloseBtn">
                    <button>
                        <img src="/web/img/ICN_CLOSE_24.png" alt="">
                    </button>
                </div>
            </div>
            <div class="msgDetail">
                <p class="date">Mar 23, 2021, 10:59 PM</p>
                <div class="otherTalk">
                    <div class="ring">
                        <img src="/web/img/userRing/1.png" alt="">
                    </div>
                    <ul class="talks">
                        <li>Hello</li>
                        <li>Hello Hello Hello</li>
                    </ul>
                </div>
                <ul class="myTalk">
                    <li>Nice to meet you2</li>
                    <li>Nice to meet you2</li>
                </ul>
            </div>
            <div class="input-send">
                <div>
                    <input type="text" placeholder="Aa">
                    <button class="sendBtn">
                        Send
                    </button>
                </div>
            </div>
        </div>

        <div class="msgModal">
            <div class="msgTopInfo">
                <div class="userInfo">
                    <div class="ring">
                        <img src="/web/img/userRing/1.png" alt="">
                    </div>
                    <strong>
                        Hannah Brown
                    </strong>
                </div>
                <div class="msgModalCloseBtn">
                    <button>
                        <img src="/web/img/ICN_CLOSE_24.png" alt="">
                    </button>
                </div>
            </div>
            <div class="msgDetail">
                <p class="date">Mar 23, 2021, 10:59 PM</p>
                <div class="otherTalk">
                    <div class="ring">
                        <img src="/web/img/userRing/1.png" alt="">
                    </div>
                    <ul class="talks">
                        <li>Hello</li>
                        <li>Hello Hello Hello</li>
                    </ul>
                </div>
                <ul class="myTalk">
                    <li>Nice to meet you3</li>
                    <li>Nice to meet you3</li>
                </ul>
            </div>
            <div class="input-send">
                <div>
                    <input type="text" placeholder="Aa">
                    <button class="sendBtn">
                        Send
                    </button>
                </div>
            </div>
        </div>

        <div class="msgModal">
            <div class="msgTopInfo">
                <div class="userInfo">
                    <div class="ring">
                        <img src="/web/img/userRing/1.png" alt="">
                    </div>
                    <strong>
                        Hannah Brown
                    </strong>
                </div>
                <div class="msgModalCloseBtn">
                    <button>
                        <img src="/web/img/ICN_CLOSE_24.png" alt="">
                    </button>
                </div>
            </div>
            <div class="msgDetail">
                <p class="date">Mar 23, 2021, 10:59 PM</p>
                <div class="otherTalk">
                    <div class="ring">
                        <img src="/web/img/userRing/1.png" alt="">
                    </div>
                    <ul class="talks">
                        <li>Hello</li>
                        <li>Hello Hello Hello</li>
                    </ul>
                </div>
                <ul class="myTalk">
                    <li>Nice to meet you4</li>
                    <li>Nice to meet you4</li>
                </ul>
            </div>
            <div class="input-send">
                <div>
                    <input type="text" placeholder="Aa">
                    <button class="sendBtn">
                        Send
                    </button>
                </div>
            </div>
        </div>

       
    </div>

    <div class="modalCertificate">
        <div class="modalBack"></div>
        <div class="modalPopReview">
            <div class="content">
                <div class="writeForm">
                    <div class="certificateTitle">
                        <h2><%=translation.mypage.Certificates_Template_Guide%></h2>
                        <p>
                            <%=translation.mypage.Download%>
                        </p>
                    </div>
                    <div class="xMark">
                        <i class="xi-close"></i>
                    </div>
                    
                </div>
                <div class="mainArea">
                    <div class="certificate" style="background-image: url('web/img/cer_guide.png');"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- 이미지보기 팝업 -->
    <div class="modal modal33">
        <div>
            <div class="xBtn">
                <button onclick="customModalClose(33)">
                    <i class="xi-close"></i>
                </button>
            </div>
            <div class="contents">
                <div class="pageCount" id="checkImageCountControlID">
                    <span></span>
                    <span></span>
                </div>
                <div class="img-btnWrap">
                    <ul class="imgList" id="modal33VideoAndImageControlID">
                    </ul>
                    <div class="arrowBtns" id="modal33ArrowBtnsID">
                        <button class="prevBtn-on">
                            <i class="fas fa-chevron-left"></i>
                        </button>
                        <button class="nextBtn-on">
                            <i class="fas fa-chevron-right"></i>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- 클래스환불약관모달 -->
    <div class="modal modal43">
        <div>
            <div class="xBtn">
                <button onclick="customModalClose(43)">
                    <i class="xi-close"></i>
                </button>
            </div>
            <div class="contents">
                <h4>
                    Refund Policy
                </h4>
                <div class="detail">
                    <div class="d1">
                        <h5>
                            교환, 환불 규정
                        </h5>
                        <strong>&lt;기본 환불규정&gt;</strong>
                        <ol>
                            <li>
                                &bull; 환불 요청 접수 후 영업일 20일 이내에 환불됩니다. 다만, 모든 콘텐츠에 한해 교환은 불가합니다.
                            </li>
                            <li>
                                &bull; PG사와 카드사의 상황에 따라 환불이 지연될 수 있습니다.
                            </li>
                            <li>
                                &bull; 천재지변, 기상악화 등 불가피한 사유로 프로그램이 취소된 경우 전액 환불됩니다.
                            </li>
                            <li>
                                &bull; 호스트 (크리에이터)가 개인 사유로 클래스 진행 6일 전~당 일 취소 시, 구매자 (회원)는 100% 환불되며 결제 수수료 및 기타 지출 발생 부분에 차액 발생시, 호스트 (크리에이터)가 차액분을 배상하게 됩니다. (유효한 카드 정보 기입 필수)
                            </li>
                            <li>
                                &bull; 온라인 콘텐츠 내용의 불만족에 의한 사유는 환불이 불가합니다.
                            </li>
                        </ol>
                    </div>
                    <div class="d2">
                        <strong>&lt;클래스 유형별 환불 규정&gt;</strong>
                        <table>
                            <thead>
                                <tr>
                                    <th>클래스 유형</th>
                                    <th>내용</th>
                                    <th>환불금액</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td rowspan="3">Class program listing (온라인)</td>
                                    <td>클래스 진행 7일 전</td>
                                    <td>결제대금 전액 환불</td>
                                </tr>
                                <tr>
                                    <td>클래스 진행 4-6일 전</td>
                                    <td>결제대금의 50% 환불</td>
                                </tr>
                                <tr>
                                    <td>클래스 진행 3일 전</td>
                                    <td>환불불가</td>
                                </tr>
                            </tbody>
                        </table>
                        <p>
                            1)	Class Program Listing 클래스 (단순판매)
                        </p>
                        <ol>
                            <li>&bull; 호스트는 상품을 행사 시작 1일 전 오픈 및 취소를 언제든 운영 가능하며, 환불 및 취소에 관하여는 기본 환불 규정이 적용됩니다. (예, 클래스 진행 하루 전 오픈 시, ‘클래스 진행 3일 전 환불 불가‘ 조항에 따라 모든 판매에 관하여 자동 환불 불가)</li>
                        </ol>
                    </div>
                    <div class="d3">
                        <p>
                            2) Class Development & Listing 클래스 (제작판매)
                        </p>
                        <table>
                            <thead>
                                <tr>
                                    <th>클래스 유형</th>
                                    <th>내용</th>
                                    <th>환불금액</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td rowspan="3">Class Development & Listing</td>
                                    <td>수강신청 후 5일 이내 해당 클래스의 콘텐츠를 이용하지 않았을 경우</td>
                                    <td>결제대금 전액</td>
                                </tr>
                                <tr>
                                    <td>해당 클래스의 콘텐츠 이용이 50% 이하 일 경우</td>
                                    <td>결재대금의 30%</td>
                                </tr>
                                <tr>
                                    <td>해당 클래스의 콘텐츠 이용이 50% 이상 일 경우</td>
                                    <td>환불불가</td>
                                </tr>
                            </tbody>
                        </table>
                        <ol>
                            <li>&bull; 수강 기간은 결제일부터 시작합니다.</li>
                            <li>&bull; 해당 클래스의 콘텐츠를 이용한 경우 신청일과 무관하게 환불 규정이 적용됩니다.</li>
                            <li>
                                &bull; 수강신청 후 5일 이내 해당 클래스의 콘텐츠를 이용하지 않았으며 기타 자료 다운로드 한 이력이 없을 시 결제 대금의 전액을 환불합니다.
                            </li>
                            <li>
                                &bull; 클래스와 함께 제공되는 자료 및 부가적으로 제공되는 서비스를 이용하는 경우 클래스를 이용한 것으로 간주합니다. 즉 해당 클래스의 콘텐츠를 이용률은 영상/오디오/읽기 자료/설문/퀴즈/토론의 콘텐츠 이용 비율을 의미하며 일부 콘텐츠 재생 및 확인 시에도 이용으로 간주됩니다. (수식: 클래스 콘텐츠 이용률 = 이용한 클래스 콘텐츠 수 / 해당 클래스 전체 콘텐츠 수 x 100%)
                            </li>
                        </ol>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <header class="commonHeader beforeLoginHeader">
        <div class="moWrap">
            <div class="side">
                <button class="hdnMenuBtn">
                    <img src="/web/img/header/icn_menu.png" alt="">
                </button>
                <h1 class="logo">
                    <a href="/">
                        <img src="/web/img/header/img_logo_mo.png" alt="">
                    </a>
                </h1>
            </div>
            <div class="hiddenMenu">
                <div class="closeBtn">
                    <button>
                        <img src="/web/img/header/btn_close_small.png" alt="">
                    </button>
                </div>
                <ul>
                    <li class="mainMenu">
                        <div class="hasArrow">
                            <a href="javascript:avoid(0)"><%=translation.openClass.Class%></a>
                            <span>
                                <img src="/web/img/header/icn_dropdown_on.png" alt="">
                            </span>
                        </div>
                        <ul class="subMenu">
                            <li>
                                <a href="javascript:avoid(0)">
                                    <%=translation.openClass.Mindfulness%>
                                </a>
                            </li>
                            <li>
                                <a href="javascript:avoid(0)">
                                    <%=translation.openClass.Meditation%>
                                </a>
                            </li>
                            <li>
                                <a href="javascript:avoid(0)">
                                    <%=translation.openClass.Yoga%>
                                </a>
                            </li>
                            <li>
                                <a href="javascript:avoid(0)">
                                    <%=translation.openClass.Somatic%>
                                </a>
                            </li>
                            <li>
                                <a href="javascript:avoid(0)">
                                    <%=translation.openClass.Movement_Activity%>
                                </a>
                            </li>
                            <li>
                                <a href="javascript:avoid(0)">
                                    <%=translation.openClass.Counseling_Coaching%>
                                </a>
                            </li>
                            <li>
                                <a href="javascript:avoid(0)">
                                    <%=translation.openClass.Others%>
                                </a>
                            </li>
                        </ul>
                    </li>
                    <li class="mainMenu hasArrow">
                        <div class="hasArrow">
                            <a href="javascript:avoid(0)"><%=translation.hostMain.Host%></a>
                            <span>
                                <img src="/web/img/header/icn_dropdown_on.png" alt="">
                            </span>
                        </div>
                        <ul class="subMenu">
                            <li>
                                <a href="javascript:avoid(0)">
                                    <%=translation.hostMain.brand%>
                                </a>
                            </li>
                            <li>
                                <a href="javascript:avoid(0)">
                                    <%=translation.hostMain.master%>
                                </a>
                            </li>
                            <li>
                                <a href="javascript:avoid(0)">
                                    <%=translation.hostMain.Teacher%>
                                </a>
                            </li>
                            <li>
                                <a href="javascript:avoid(0)">
                                    <%=translation.hostMain.creator%>
                                </a>
                            </li>
                            <li>
                                <a href="javascript:avoid(0)">
                                    <%=translation.hostMain.leader%>
                                </a>
                            </li>
                        </ul>
                    </li>
                    <li class="mainMenu">
                        <div>
                            <a href="/gatheringMain"><%=translation.footer.Gathering%></a>
                        </div>
                    </li>
                    <li class="mainMenu">
                        <div>
                            <a href="/journalMain"><%=translation.footer.Journal%></a>
                        </div>
                    </li>
                </ul>
                <div class="signIn">
                    <img src="/web/img/header/icn_login.png" alt="">
                    <a href="javascript:avoid(0)" onclick="customModal(100)"><%=translation.loginAndJoin.Sign_in%></a>
                </div>
            </div>
        </div>
        <div class="navWrap">
            <h1 class="logo">
                <a href="/">
                    <img src="/web/img/header/logo.png" alt="">
                </a>
            </h1>
            <nav class="loginBar commonBar" display="none">
                <ul>
                    <li>
                        <a href="/classMain">
                            <%=translation.openClass.Class%>
                        </a>
                    </li>
                    <li>
                        <a href="/hostMain">
                            <%=translation.hostMain.Host%>
                        </a>
                    </li>
                    <li>
                        <a href="/gatheringMain">
                            <%=translation.footer.Gathering%>
                        </a>
                    </li>
                    <li>
                        <a href="/journalMain">
                            <%=translation.footer.Journal%>
                        </a>
                    </li>
                </ul>
            </nav>
            <nav class="loginBar-categorys commonBar">
                <ul>
                    <li>
                        <a href="/classMain?filter=mindfulness">
                            <%=translation.openClass.Mindfulness%>
                        </a>
                    </li>
                    <li>
                        <a href="/classMain?filter=meditation">
                            <%=translation.openClass.Meditation%>
                        </a>
                    </li>
                    <li>
                        <a href="/classMain?filter=yoga">
                            <%=translation.openClass.Yoga%>
                        </a>
                    </li>
                    <li>
                        <a href="/classMain?filter=somatic">
                            <%=translation.openClass.Somatic%>
                        </a>
                    </li>
                    <li>
                        <a href="/classMain?filter=ma">
                            <%=translation.openClass.Movement_Activity%>
                        </a>
                    </li>
                    <li>
                        <a href="/classMain?filter=cc">
                            <%=translation.openClass.Counseling_Coaching%>
                        </a>
                    </li>
                    <li>
                        <a href="/classMain?filter=other">
                            <%=translation.openClass.Others%>
                        </a>
                    </li>
                </ul>
            </nav>
        </div>
        
        <div class="sideBtn">
            <!-- 모바일 겸용 -->
            <div class="searchTab">
                <button class="moSearchCloseBtn">
                    <i class="xi-close"></i>
                </button>
                <input type="text" id="headerSearchInput" placeholder="<%=translation.loginAndJoin.What_do_I_need_in_my_life%>" onkeyDown="getKeyEventToSearch()">
                <button class="serchBtn" onclick="$(this).parent('.searchTab').toggleClass('active')">
                    <span>
                        <img src="/web/img/header/ICN_SEARCH.png" alt="">
                    </span>
                </button>
                <div class="resultBox" id="userSearchResultControlID">
                    <ul class="resultVal" id="userSearchResultAppendID">
                    </ul>
                    <div class="removeBtn">
                        <button onclick="removeResult(this, 'all')">Remove All</button>
                    </div>
                </div>
            </div>
            <!-- signBtn에 active가 들어오면 로그인버튼 생성 -->
            <div class="signBtn active" id = 'signIn'>
                <button class="signInBtn" onclick="customModal(100)">
                    <%=translation.loginAndJoin.Sign_in%>
                </button>
            </div>
            <!-- myInfo에 active가 들어가면 모바일 유저인포 생성 -->
            <ul class="myInfo" id = 'myInfo'>
                <li class="userInfo" id="userInfoId">
                    <button class="userInfoButton" id="userInfoBtn">
                        <img class="userImg" id="userImgId" src="/web/img/userRing/<%=user.userUID%>.png" alt="">
                        <span class="userName" id = "userName"></span>
                    </button>
                    <ul class="userInfo-menu">
                        <li class="userInfo-menu-items">
                            <button onclick="location.href='/mypage/<%=user.userUID%>'">
                                <div class="left-side">
                                    <span class="icon">
                                        <img src="/web/img/header/menu/1.png" alt="">
                                    </span>
                                    <span class="title">
                                        <%=translation.footer.My_Page%>
                                    </span>
                                </div>
                                <div class="right-side">
                                    <span class="arrow">
                                        <img src="/web/img/header/menu/ICN_ARROW.png" alt="">
                                    </span>
                                </div>
                            </button>
                        </li>
                        <li class="userInfo-menu-items">
                            <button onclick="moveToSettedMyPage('classTab')">
                                <div class="left-side">
                                    <span class="icon">
                                        <img src="/web/img/header/menu/2.png" alt="">
                                    </span>
                                    <span class="title">
                                        <%=translation.footer.My_Classes%>
                                    </span>
                                </div>
                                <div class="right-side">
                                    <span class="arrow">
                                        <img src="/web/img/header/menu/ICN_ARROW.png" alt="">
                                    </span>
                                </div>
                            </button>
                        </li>
                        <li class="userInfo-menu-items">
                            <button onclick="moveToSettedMyPage('favoritesTab')">
                                <div class="left-side">
                                    <span class="icon">
                                        <img src="/web/img/header/menu/3.png" alt="">
                                    </span>
                                    <span class="title">
                                        <%=translation.footer.My_Favorites%>
                                    </span>
                                </div>
                                <div class="right-side">
                                    <span class="arrow">
                                        <img src="/web/img/header/menu/ICN_ARROW.png" alt="">
                                    </span>
                                </div>
                            </button>
                        </li>
                        <li class="userInfo-menu-items">
                            <button onclick="alert('개인 수련을 위한 어플리케이션 준비중입니다.')">
                                <div class="left-side">
                                    <span class="icon">
                                        <img src="/web/img/header/menu/4.png" alt="">
                                    </span>
                                    <span class="title">
                                        <%=translation.footer.My_Practice%>
                                    </span>
                                </div>
                                <div class="right-side">
                                    <span class="arrow">
                                        <img src="/web/img/header/menu/ICN_ARROW.png" alt="">
                                    </span>
                                </div>
                            </button>
                        </li>
                        <li class="userInfo-menu-items">
                            <button onclick="checkisUserHostInheader()">
                                <div class="left-side">
                                    <span class="icon">
                                        <img src="/web/img/header/menu/5.png" alt="">
                                    </span>
                                    <span class="title" >
                                        <%=translation.footer.Host_Studio%>
                                    </span>
                                </div>
                                <div class="right-side">
                                    <span class="arrow">
                                        <img src="/web/img/header/menu/ICN_ARROW.png" alt="">
                                    </span>
                                </div>
                            </button>
                        </li>
                        <li class="userInfo-menu-items">
                            <button onclick="location.href='/setting'">
                                <div class="left-side">
                                    <span class="icon">
                                        <img src="/web/img/header/menu/6.png" alt="">
                                    </span>
                                    <span class="title">
                                        <%=translation.loginAndJoin.Setting%>
                                    </span>
                                </div>
                                <div class="right-side">
                                    <span class="arrow">
                                        <img src="/web/img/header/menu/ICN_ARROW.png" alt="">
                                    </span>
                                </div>
                            </button>
                        </li>
                        <li class="userInfo-menu-items">
                            <a href = "/logout">
                            <button>
                                <div class="left-side">
                                    <span class="icon">
                                        <img src="/web/img/header/menu/7.png" alt="">
                                    </span>
                                    <span class="title">
                                        <%=translation.dashBoard.Logout%>
                                    </span>
                                </div>
                                <div class="right-side">
                                    <span class="arrow">
                                        <img src="/web/img/header/menu/ICN_ARROW.png" alt="">
                                    </span>
                                </div>
                            </button>
                        </a>
                        </li>
                    </ul>
                </li>
                <!-- 모바일 겸용 -->
                <li class="message">
                    <button class="openMsgWrapBtn" id="msgWrapBtnID">
                        <!-- 메시지가 없을 때 -->
                        <!-- <img class="noAlram" src="/web/img/header/ICN_MESSAGE_1.png" alt=""> -->
                        <!-- 메시지가 있을 때 -->
                        <img class="alram" src="/web/img/header/ICN_MESSAGE_2.png" alt="">
                    </button>
                    <!--msgWrap에 active 가 들어오면 열림 -->
                    <div class="msgWrap" id="msgWrapControlID">
                        <div class="moCloseBtn" id="moCloseBtnID">
                            <img src="/web/img/ICN_CLOSE_24.png" alt="">
                        </div>
                        <h6>
                            Messenger
                        </h6>
                        <div class="searchMsg">
                            <div class="tab">
                                <input type="text" placeholder="Search Messenger">
                                <img src="/web/img/icn_search_small.png" alt="">
                            </div>
                            <!-- dropListBox에 active 클래가 들어오면 나타남 -->
                            <div class="dropListBox">
                                <ul>
                                    <%
                                        for(var i = 0; i < 10; i++)
                                        {
                                    %>
                                    <li class="userInfo">
                                        <div class="ring">
                                            <img src="/web/img/userRing/1.png" alt="">
                                        </div>
                                        <strong class="nameText">
                                            Hannah Brown
                                        </strong>
                                    </li>
                                    <%
                                        }
                                    %>
                                </ul>
                            </div>
                        </div>
                        <div class="msgListWrap">
                            <!-- noMsgText에 active클래스가 들어오면 나타남 -->
                            <span class="noMsgText">
                                There are no messages.
                            </span>
                            <!-- msgList에 active클래스가 들어오면 리스트 나타남 -->
                            <ul class="msgList active">
                                <li class="msg swiperMsg" style="display: none">
                                    <div class="userInfo">
                                        <div class="ring">
                                            <img src="/web/img/userRing/1.png" alt="">
                                        </div>
                                        <div class="name-detail">
                                            <strong class="name">Hannah Brown</strong>
                                            <p class="detail">
                                                Hello! Hello! Hello! H! Hello! Hello! H! Hello! Hello! H! Hello! Hello! H! Hello! Hello! H! Hello! Hello! Hello!...
                                            </p>
                                        </div>
                                    </div>
                                    <div class="condition">
                                        <div class="sign">
                                            <span class="ball"></span>
                                        </div>
                                        <div class="reportBtns">
                                            <button class="report" onclick="$(this).next('.hdnDelBtn').addClass('active')">
                                                <img src="/web/img/ICN_REPORT.png" alt="">
                                            </button>
                                            <button class="hdnDelBtn">
                                                Delete
                                            </button>
                                        </div>
                                        <p class="distance">
                                            15m
                                        </p>
                                    </div>
                                    <div class="moDeletBtn">
                                        <button class="deletBtn-on">Delet</button>
                                    </div>
                                </li>
                                <%
                                    for(var i = 0; i < 20; i++)
                                    {
                                %>
                                <!-- msg에 unChk 클래스가 들어오면 미확인 ui나타남 -->
                                <li class="msg swiperMsg" id="swiperMsg<%=i%>ID">
                                    <div class="userInfo">
                                        <div class="ring">
                                            <img src="/web/img/userRing/1.png" alt="">
                                        </div>
                                        <div class="name-detail">
                                            <strong class="name">Hannah Brown #### <%= i %></strong>
                                            <p class="detail">
                                                Hello! Hello! Hello! H! Hello! Hello! H! Hello! Hello! H! Hello! Hello! H! Hello! Hello! H! Hello! Hello! Hello!...
                                            </p>
                                        </div>
                                    </div>
                                    <div class="condition">
                                        <div class="sign">
                                            <span class="ball"></span>
                                        </div>
                                        <div class="reportBtns">
                                            <button class="report" onclick="$(this).next('.hdnDelBtn').addClass('active')">
                                                <img src="/web/img/ICN_REPORT.png" alt="">
                                            </button>
                                            <button class="hdnDelBtn">
                                                Delete
                                            </button>
                                        </div>
                                        <p class="distance">
                                            15m
                                        </p>
                                    </div>
                                    <div class="moDeletBtn">
                                        <button class="deletBtn-on">Delet</button>
                                    </div>
                                </li>
                                <%
                                    }
                                %>
                            </ul>
                        </div>
                    </div>
                </li>
                <li class="alram">
                    <button class="openAlertBtn" id="alertBtnID">
                        <!-- 알림이 없을 때 -->
                        <!-- <img class="noAlram" src="/web/img/header/ICN_ALARM_1.png" alt=""> -->
                        <!-- 알림이 있을 때 -->
                        <img class="alram" src="/web/img/header/ICN_ALARM_2.png" alt="">
                    </button>
                    <div class="alertListWrap" id="alertListWrapID">
                        <ul class="alertList">
                            <%
                                for(var i = 0; i < 10; i++) {
                            %>
                            <li class="alert">
                                <a>
                                    Welcome to join us! Now we are Mind Ground friends who practice mindful life together on here! Start various practices and events for a healthy mind and happy daily life. We all support each other.
                                </a>
                                <button class="closeAlert">
                                    <img src="/web/img/ICN_CLOSE_16.png" alt="">
                                </button>
                            </li>
                            <%
                                }
                            %>
                        </ul>
                        <div class="removeBtnWrap">
                            <button class="removeBtn-on">
                                Remove All
                            </button>
                        </div>
                    </div>
                </li>
            </ul>
        </div>
    </header>
    <!-- 모바일전용 -->
    <div class="moUserInfo marginAuto">
        <div class="menuList">
            <div>
                <a href="/classMain" class="active">
                    <%=translation.openClass.Class%>
                </a>
            </div>
            <div>
                <a href="/hostMain">
                    <%=translation.hostMain.Host%>
                </a>
            </div>
            <div>
                <a href="/gatheringMain">
                    <%=translation.footer.Gathering%>
                </a>
            </div>
            <div>
                <a href="/journalMain">
                    <%=translation.footer.Journal%>
                </a>
            </div>
        </div>
        <div class="userInfo">
            <button>
                <img class="userImg" src="/web/img/userRing/<%=user.userUID%>.png" alt="">
            </button>
            <div class="myPageHidden">
                <div class="myPage-xBtn">
                    <button>
                        <img src="/web/img/ICN_CLOSE.png" alt="">
                    </button>
                </div>
                <div class="myPage-myInfo">
                    <div class="flexArea">
                        <h4>
                            <%=translation.loginAndJoin.My_Ground_Status%>
                        </h4>
                    </div>
                    <div class="myRing">
                        <span>
                            <img src="/web/img/userRing/1.png">
                            <!-- <img src="/web/img/gatheringMain/thumbDummy.png" alt=""> -->
                            <dl class="percent p1">
                                <dt>
                                    <%=translation.afterlogin.Ethics%>
                                </dt>
                                <dd>
                                    50%
                                </dd>
                            </dl>
                            <dl class="percent p2">
                                <dt>
                                    <%=translation.afterlogin.Tenacity%>
                                </dt>
                                <dd>
                                    50%
                                </dd>
                            </dl>
                            <dl class="percent p3">
                                <dt>
                                    <%=translation.afterlogin.Confidence%>
                                </dt>
                                <dd>
                                    50%
                                </dd>
                            </dl>
                            <dl class="percent p4">
                                <dt>
                                    <%=translation.afterlogin.Wisdom%>
                                </dt>
                                <dd>
                                    50%
                                </dd>
                            </dl>
                            <dl class="percent p5">
                                <dt>
                                    <%=translation.afterlogin.Positivity%>
                                </dt>
                                <dd>
                                    50%
                                </dd>
                            </dl>
                        </span>
                    </div>
                    <ul class="state">
                        <li>
                            <span>Classes</span>
                            <strong>50</strong>
                        </li>
                        <li>
                            <span>Gathering</span>
                            <strong>100</strong>
                        </li>
                        <li>
                            <span>Practice</span>
                            <strong>100hrs</strong>
                        </li>
                        <li>
                            <span>Friends</span>
                            <strong>1000</strong>
                        </li>
                        <li>
                            <span>Journal Entries</span>
                            <strong>1200</strong>
                        </li>
                    </ul>
                </div>
                <div class="myPage-goPageBtn">
                    <div>
                        <a href="/mypage" class="textBox">
                            <div>
                                <img src="/web/img/header/menu/1.png" alt="">
                                <span><%=translation.footer.My_Page%></span>
                            </div>
                            <div>
                                <img src="/web/img/header/menu/ICN_ARROW.png" alt="">
                            </div>
                        </a>
                        <a href="javascript:avoid(0)" class="textBox">
                            <div>
                                <img src="/web/img/header/menu/2.png" alt="">
                                <span><%=translation.footer.My_Classes%></span>
                            </div>
                            <div>
                                <img src="/web/img/header/menu/ICN_ARROW.png" alt="">
                            </div>
                        </a>
                        <a href="javascript:avoid(0)" class="textBox">
                            <div>
                                <img src="/web/img/header/menu/3.png" alt="">
                                <span><%=translation.footer.My_Favorites%></span>
                            </div>
                            <div>
                                <img src="/web/img/header/menu/ICN_ARROW.png" alt="">
                            </div>
                        </a>
                        <a href="javascript:avoid(0)" onclick="alert('개인 수련을 위한 어플리케이션 준비중입니다.')" class="textBox">
                            <div>
                                <img src="/web/img/header/menu/4.png" alt="">
                                <span><%=translation.footer.My_Practice%></span>
                            </div>
                            <div>
                                <img src="/web/img/header/menu/ICN_ARROW.png" alt="">
                            </div>
                        </a>
                        <a href="javascript:avoid(0)" onclick="checkisUserHostInheader()" class="textBox">
                            <div>
                                <img src="/web/img/header/menu/5.png" alt="">
                                <span><%=translation.footer.Host_Studio%></span>
                            </div>
                            <div>
                                <img src="/web/img/header/menu/ICN_ARROW.png" alt="">
                            </div>
                        </a>
                        <a href="/setting" class="textBox">
                            <div>
                                <img src="/web/img/header/menu/6.png" alt="">
                                <span><%=translation.loginAndJoin.Setting%></span>
                            </div>
                            <div>
                                <img src="/web/img/header/menu/ICN_ARROW.png" alt="">
                            </div>
                        </a>
                        <a href="/logout" class="textBox">
                            <div>
                                <img src="/web/img/header/menu/7.png" alt="">
                                <span><%=translation.dashBoard.Logout%></span>
                            </div>
                            <div>
                                <img src="/web/img/header/menu/ICN_ARROW.png" alt="">
                            </div>
                        </a>
                    </div>
                </div>
                <div class="myPage-friendList">
                    <h5>
                        Recommended Friends
                    </h5>
                    <div class="friendList-list-content">
                        <div class="friendList-list-content-img">
                            <img src="/web/img/dummyIcon_30.png" alt="">
                        </div>
                        <div class="friendList-list-content-text">
                            <h6>
                                Hannah Brown
                            </h6>
                            <p>
                                Teacher
                            </p>
                        </div>
                        <div class="friendList-list-content-btn">
                            <button class="followBtn">
                                Following
                            </button>
                        </div>
                    </div>
                    <div class="friendList-list-content">
                        <div class="friendList-list-content-img">
                            <img src="/web/img/dummyIcon_30.png" alt="">
                        </div>
                        <div class="friendList-list-content-text">
                            <h6>
                                Hannah Brown
                            </h6>
                            <p>
                                Teacher
                            </p>
                        </div>
                        <div class="friendList-list-content-btn">
                            <button class="followBtn">
                                Following
                            </button>
                        </div>
                    </div>
                    <div class="friendList-list-content">
                        <div class="friendList-list-content-img">
                            <img src="/web/img/dummyIcon_30.png" alt="">
                        </div>
                        <div class="friendList-list-content-text">
                            <h6>
                                Hannah Brown
                            </h6>
                            <p>
                                Teacher
                            </p>
                        </div>
                        <div class="friendList-list-content-btn">
                            <button class="followBtn">
                                Following
                            </button>
                        </div>
                    </div>
                    <div class="friendList-list-content">
                        <div class="friendList-list-content-img">
                            <img src="/web/img/dummyIcon_30.png" alt="">
                        </div>
                        <div class="friendList-list-content-text">
                            <h6>
                                Hannah Brown
                            </h6>
                            <p>
                                Teacher
                            </p>
                        </div>
                        <div class="friendList-list-content-btn">
                            <button class="followBtn">
                                Following
                            </button>
                        </div>
                    </div>
                    <div class="friendList-list-content">
                        <div class="friendList-list-content-img">
                            <img src="/web/img/dummyIcon_30.png" alt="">
                        </div>
                        <div class="friendList-list-content-text">
                            <h6>
                                Hannah Brown
                            </h6>
                            <p>
                                Teacher
                            </p>
                        </div>
                        <div class="friendList-list-content-btn">
                            <button class="followBtn">
                                Following
                            </button>
                        </div>
                    </div>
                    <div class="friendList-list-content">
                        <div class="friendList-list-content-img">
                            <img src="/web/img/dummyIcon_30.png" alt="">
                        </div>
                        <div class="friendList-list-content-text">
                            <h6>
                                Hannah Brown
                            </h6>
                            <p>
                                Teacher
                            </p>
                        </div>
                        <div class="friendList-list-content-btn">
                            <button class="followBtn">
                                Following
                            </button>
                        </div>
                    </div>
                    <div class="friendList-list-content">
                        <div class="friendList-list-content-img">
                            <img src="/web/img/dummyIcon_30.png" alt="">
                        </div>
                        <div class="friendList-list-content-text">
                            <h6>
                                Hannah Brown
                            </h6>
                            <p>
                                Teacher
                            </p>
                        </div>
                        <div class="friendList-list-content-btn">
                            <button class="followBtn">
                                Following
                            </button>
                        </div>
                    </div>
                    <div class="friendList-btn">
                        <button>
                            More Friends
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<%- include ../loginModal.html%>


<script src="/web/js/socket.io.js"></script>
<script>
    // const socket = new WebSocket(`ws://${location.host}`);
    // socket.onopen = ()=>{ 
    //   console.log("웹소켓서버와 연결 성공"); 
    // };
    // socket.on("message", data =>{
    //     console.log(data);
    // })
    const socket = io(`ws://${location.host}`);

    socket.on("connect", () => {
    // either with send()
    socket.send("Hello!");

    // or with emit() and custom event names
    socket.emit("salutations", "Hello!", { "mr": "john" }, Uint8Array.from([1, 2, 3, 4]));
    });

    // handle the event sent with socket.send()
    socket.on("message", data => {
    console.log(data);
    });

    // handle the event sent with socket.emit()
    socket.on("chat message", (elem1, elem2, elem3) => {
    console.log(elem1, elem2, elem3);
    });

</script>
<script>
    var userSearchResult = <%- userSearchResult ? JSON.stringify(userSearchResult) : [] %>;

    $(function() {
        // userInfo 바깥 영역 클릭시 userInfo 사라지게
        window.addEventListener('click', userInfoMenuEvent);
        function userInfoMenuEvent(e) 
        {
            var userName = document.getElementById('userName');
            var userImgId = document.getElementById('userImgId');
            var userInfo = document.getElementById('userInfoId');
            var userInfoBtn = document.getElementById('userInfoBtn');
            if(userInfo == e.target || userInfoBtn == e.target || userName == e.target || userImgId == e.target)
            {
                $('.userInfo-menu').addClass('active');
                // userInfo.classList.add('active');
                // userInfoBtn.classList.add('active');
            }
            else
            {
                $('.userInfo-menu').removeClass('active');
                // userInfo.classList.remove('active');
                // userInfoBtn.classList.remove('active');
            }
        }
        
        // //pc유저 마이페이지메뉴 논블록
        // $('.userInfo > button').click(function() {
        //     $(this).next('.userInfo-menu').fadeToggle('active');
        // });

        //메인페이지 에서만 카테고리메뉴 헤더에 붙기
        var path = window.location.pathname;
        if(path == '/')
        {
            $(window).on('scroll', function() {
                var mainBannerCategory = $('.classCategoryWrap .cateList');
                var mainBannerCategoryTop = mainBannerCategory.offset().top;
                var scrollValue = $(document).scrollTop();
                var windowInnerWidth = window.innerWidth;

                if(windowInnerWidth <= 767)
                {
                    $('.loginBar-categorys').css('display', 'none')
                }
                else
                {
                    if(mainBannerCategoryTop <= scrollValue)
                    {
                        $('.loginBar-categorys').css('display', 'block')
                    }
                    else
                    {
                        $('.loginBar-categorys').css('display', 'none')
                    }
                }
            })
        }

        var myInfoActive = false;
        //로그인시  wrap패딩탑 증량
        $(window).on('load resize', function() {
            if($('.myInfo').hasClass('active'))
            {
                $('.moUserInfo').addClass('active');
            }
        });
        function wrapPaddingTopChahge() {
            var wrap = document.querySelector('.wrap');
            var moUserInfo = document.querySelector('.moUserInfo');
            var moUserInfoChk = moUserInfo.classList.contains('active');
            var windowInnerWidth = window.innerWidth;
            if(moUserInfoChk)
            {
                if(windowInnerWidth <= 1279)
                {
                    wrap.style.paddingTop = '115px';
                }
                else
                {
                    wrap.style.paddingTop = '60px';
                }
            }
        }
        window.addEventListener('load', wrapPaddingTopChahge);
        window.addEventListener('resize', wrapPaddingTopChahge);
        
        //검색어 입력시 검색박스 오픈
        $('#headerSearchInput').on('keyup' ,function() {
            if(userSearchResult != null && userSearchResult != undefined && userSearchResult.length > 0) {
                $(this).parents('.searchTab').children('.resultBox').addClass('active');
            }

            if($(this).val() == "")
            {
                $(this).parents('.searchTab').children('.resultBox').removeClass('active');
            }
        })

        // 모바일 검색닫기 버튼
        $('.moSearchCloseBtn').click(function() {
            $(this).parent('.searchTab').removeClass('active').removeClass('active1');
            $(this).parent('.searchTab').removeClass('active').removeClass('active2');
            $(this).parent('.searchTab').children('.resultBox').removeClass('active');
        })

        //햄버거메뉴관련 스크립트
        $(window).resize(function() {
            if($(this).innerWidth() > 767) {
                $('.hdnMenuBtn').parents('.moWrap').children('.hiddenMenu').removeClass('active');
                $('.hasArrow').parent('.mainMenu').css('height', 'auto').children('.subMenu').hide();
                $('.hasArrow').removeClass('active');

                $('.myPageHidden').removeClass('active');
            }
        })
        //모바일용 히든메뉴
        $('.hdnMenuBtn').on('click', function() {
            $(this).parents('.moWrap').children('.hiddenMenu').addClass('active');
        });
        $('.hiddenMenu > .closeBtn').on('click', function() {
            $(this).parents('.hiddenMenu').removeClass('active');
        });
        $('.hasArrow').on('click', function() {
            $(this).parent('.mainMenu').css('height', 'auto').children('.subMenu').slideToggle();
            $(this).toggleClass('active');
        });

        //모바일용 마이페이지버튼
        $('.userInfo > button').click(function() {
            $(this).next().addClass('active');
        });
        $('.userInfo').click(function() {
            $(this).next().addClass('active');
        });
        $('.myPage-xBtn > button').click(function() {
            $(this).parents('.myPageHidden').removeClass('active');
        });

        //검색버튼
        $('.serchBtn').click(function() {
            if($('.signBtn').hasClass('active'))
            {
                $(this).parents('.sideBtn').children('.searchTab').toggleClass('active1');
                $(this).parents('.searchTab').children('.resultBox').removeClass('active');
            }
            else if($('.myInfo').hasClass('active'))
            {
                $(this).parents('.sideBtn').children('.searchTab').toggleClass('active2');
                $(this).parents('.searchTab').children('.resultBox').removeClass('active');
            }
            // console.log(' click check' + $(this).parents('.sideBtn').children('.searchTab').hasClass('active'))
            if(!$(this).parents('.sideBtn').children('.searchTab').hasClass('active')){
                searchList()
            }
        })

        //*********************메신저, 얼럿************************

        // 메세지목록 열기
        $('#msgWrapBtnID').click(function() {
            document.getElementById('msgWrapControlID').classList.toggle('active');
            
            if(document.getElementById('msgWrapControlID').classList.contains('active')) {
                document.querySelector('body').addEventListener('click', msgWrapFunc);
            }

            function msgWrapFunc(event) {
                var tempTarget = event.target;

                if(tempTarget != document.getElementById('msgWrapBtnID') && !tempTarget.classList.contains('hdnDelBtn') && tempTarget != document.getElementById('moCloseBtnID')) {
                    var matchTag = event.currentTarget.querySelector('#msgWrapControlID').querySelectorAll('*');
                    var tempFlag = false;
                    
                    for(var i = 0; i < matchTag.length; i++) {
                        if(matchTag[i] == tempTarget) {
                            tempFlag = true;
                            break;
                        }
                    }

                    if(!tempFlag) {
                        document.getElementById('msgWrapControlID').classList.remove('active');
                    }
                }
            }
        });

        // 모바일에서 메시지목록 닫기
        $('.moCloseBtn').click(function() {
            document.getElementById('msgWrapControlID').classList.remove('active');
        });

        // 알림목록 열기
        $('#alertBtnID').click(function() {
            document.getElementById('alertListWrapID').classList.toggle('active');
            
            if(document.getElementById('alertListWrapID').classList.contains('active')) {
                document.querySelector('body').addEventListener('click', alertWrapFunc);
            }

            function alertWrapFunc(event) {
                var tempTarget = event.target;

                if(tempTarget != document.getElementById('alertBtnID')) {
                    var matchTag = event.currentTarget.querySelector('#alertListWrapID').querySelectorAll('*');
                    var tempFlag = false;
                    
                    for(var i = 0; i < matchTag.length; i++) {
                        if(matchTag[i] == tempTarget) {
                            tempFlag = true;
                            break;
                        }
                    }

                    if(!tempFlag) {
                        document.getElementById('alertListWrapID').classList.remove('active');
                    }
                }
            }
        });

        // 리포트 클릭시 도트ui고정되게끔 active추가
        $('.report').click(function() {
            $(this).addClass('active');
        });

        // 메시지 삭제
        $('.hdnDelBtn').click(function() {
            $(this).parents('.msg').remove();
        });

        // 메신저창 오픈
        $(document).on('click', '.name-detail', function() {
            $('.msgModal').addClass('active')
        });

        // 메신저창닫기
        $('.msgModalCloseBtn > button').click(function() {
            $(this).parents('.msgModal').removeClass('active');
        })
        
        // 메세지 삭제 버튼 767px 이하에서만 실행
        $(window).on('load resize', function() {
            var windowInnerWidth = window.innerWidth;
            
            if(windowInnerWidth <= 767) {
                // var swipe = new Hammer(element);
                
                swipe.on('swipeleft', function() {
                });

                swipe.on('swiperight', function() {
                });
            } else {
                // size가 모바일, 테블릿을 벗어났을 때 eventListener 제거 하는 함수
            }
        });

        //*****************************************************

        //팔로잉 버튼
        $('.followBtn').click(function() {
            var followText = $(this).html() == 'Follow'?'Following':'Follow';
            $(this).toggleClass('active');
            $(this).html(followText);
        })
        
        //이미지보기
        $('#modal33ArrowBtnsID > button').click(function() {
            if($(this).hasClass('nextBtn-on'))
            {
                if(document.getElementById('videoModalVideoControlID') != undefined && document.getElementById('videoModalVideoControlID') != null) {
                    document.getElementById('videoModalVideoControlID').pause();
                }

                var no = $('.imgList > [data-no].active').data('no') + 1;

                $('[data-no]').each(function() {
                    $(this).removeClass('active');
                });
                if(no >= $('.imgList > li').length + 1)
                {
                    $('[data-no="1"]').addClass('active');
                    document.querySelector('#checkImageCountControlID > span:nth-child(1)').innerText = 1;
                }
                else
                {
                    $('[data-no='+no+']').each(function()
                    {
                        $(this).addClass('active');
                        document.querySelector('#checkImageCountControlID > span:nth-child(1)').innerText = no;
                    });
                }
            }
            else if($(this).hasClass('prevBtn-on'))
            {
                if(document.getElementById('videoModalVideoControlID') != undefined && document.getElementById('videoModalVideoControlID') != null) {
                    document.getElementById('videoModalVideoControlID').pause();
                }

                var no = $('.imgList > [data-no].active').data('no') - 1;
                $('[data-no]').each(function() {
                    $(this).removeClass('active');
                });
                if(no <= 0)
                {
                    $('[data-no='+$('.imgList > li').length+']').addClass('active');
                    document.querySelector('#checkImageCountControlID > span:nth-child(1)').innerText = $('.imgList > li').length;
                }
                else
                {
                    $('[data-no='+no+']').each(function()
                    {
                        $(this).addClass('active');
                        document.querySelector('#checkImageCountControlID > span:nth-child(1)').innerText = no;
                    });
                }
            }
        })
    })

    function getKeyEventToSearch(){
        if(event.keyCode == 13) {
            searchList()
        }
    }
    function searchList(){
        var searchValue = document.querySelector('#headerSearchInput').value;

        var searchRegExp = /^[ㄱ-ㅎ|가-힣|a-z|A-Z|0-9|]+$/;

        if(!searchRegExp.test(searchValue)) {
            alert('특수문자는 입력 불가능합니다.');
            return false;
        }

        if(searchValue.length<1){
            alert('검색어를 입력해 주세요')
            return;
        }
        location.href="/search/"+searchValue;
    }

    function login(signID, signPW)
    {
        var id = '';
        var pwd = '';

        if(signID !== null && signID !== undefined && signID !== '' && signPW !== null && signPW !== undefined && signPW !== '')
        {
            id = signID;
            pwd = signPW;    
        }
        else
        {
            id = document.getElementById('email').value;
            pwd = SHA256(document.getElementById('pwd').value);
        }
        var errorEmail = document.querySelector('.wrongMessage-email'); //이메일 에러표시

        if(id == "") {
            errorEmail.innerText = '이메일을 입력해주세요.';
            errorEmail.style.display = 'block';
            return false;
        }

        var jsonObject = {};
        
        $.ajax({
            type : "POST",
            url : "/protocol/login",
            data : {userEmail : id, pwd : pwd},
            dataType : 'json',
            success : function(result){
                console.log('come check' + result.message);
                
                if(signID === null || signID === undefined || signID === '')
                {
                    errorEmail.style.display = 'none';
                }

                location.href="/";

                // ==============================================
                // 로그인시 hostMain으로 보내는 용도, 테스트용
                // ==============================================
                // location.href="/hostMain"

            },error : function(error){
                // 이메일이 없을 경우 noUser
                if(JSON.parse(error.responseText).message == "noUser")
                {
                    errorEmail.innerText = '<%=translation.loginAndJoin.We_can_t_find_account_with_00000_0000_com_Try_another_email_if_you_don_t_have_an_Mind_Ground_account_you_can_create%>';
                    
                    if((errorEmail.innerText).includes('계정')) {
                        var tempString = errorEmail.innerText;
                        errorEmail.innerText = id + ' ' + tempString;
                    } else {
                        var tempString = errorEmail.innerText.split('/');
                        errorEmail.innerText = tempString[0] + id + tempString[1];
                    }

                    errorEmail.style.display = 'block';
                }

                // 비밀번호가 틀렸을 경우 incorrect password
                if(JSON.parse(error.responseText).message == "incorrectPassword")
                {
                    errorEmail.innerText = '<%=translation.loginAndJoin.Password_is_incorrect%>';
                    errorEmail.style.display = 'block';
                }

                //errorEmail.innerText = '<%=translation.loginAndJoin.Login_failed%>';
                //errorEmail.style.display = 'block';
                console.log('error : ' + JSON.parse(error.responseText).message);
            }
        });

        // jsonObject.protocol = 'login'
        // jsonObject.userEmail = id;
        // jsonObject.password = pwd;

        // protocolSendAjaxWithCallBack(jsonObject, function(result){
        //     console.log('get result');
        // });
    };

                var email = '';
                var pwd= '';

                function setInfo(){
                    email = document.getElementById('email').value;
                    pwd = SHA256(document.getElementById('password').value);
                }

                function signUp(){
                    var gender = document.getElementById('genderCategory').value;
                    if (gender == '사용자지정'){
                        gender = document.getElementById('genderCustom').value;
                    }
                    var userBio = document.getElementById('bioInfo').value;
                    var region = document.getElementById('regionCategory').value;
                    var userName = document.getElementById('name').value;
                    var year = document.getElementById('year').value;
                    var month = document.getElementById('month').value ;
                    var day = document.getElementById('day').value;
                    var regEnglishName = /^[a-zA-Z ]+$/;
                    var location = document.getElementById('regionCategory').value;
                    var country = document.getElementById('signupCountry').value;
                    var state = document.getElementById('signupState').value;
                    var city = document.getElementById('signupCity').value;
                    var streetAddress = document.getElementById('signupStreetAddress').value
                    var emailChk =  /^([0-9a-zA-Z_\.-]+)@([0-9a-zA-Z_-]+)(\.[0-9a-zA-Z_-]+){1,2}$/;
                    console.log(`get location ${location}`);
                    if(document.getElementById('social'))
                    {
                        if(document.getElementById('social').value !== null && document.getElementById('social').value !== undefined && document.getElementById('social').value !== '')
                        {
                            var social = document.getElementById('social').value;
                            var socialId = document.getElementById('socialId').value;
                        }
                    }

                    if (userName == null || userName == "")
                    {
                        alert('이름을 입력해주세요');
                        return false;
                    }
                    else if(!regEnglishName.test(userName))
                    {
                        alert('영문 이름만 기입해주세요.');
                        return false;
                    }

                    if (year == null || year =="" || month == null || month == "" || day == null || day == "" || month > 13 || day > 32 || year > 2100 || year < 1800)
                    {
                        alert('생년월일을 확인해주세요')
                        return false;
                    }

                    if (gender == null || gender == "" || gender == "선택")
                    {
                        alert('성별을 선택해주세요')
                        return false;
                    }


                    if (region == null || region == "" || region == "선택")
                    {
                        alert('지역을 선택해주세요');
                        return false;
                    }

                    var jsonObject = {};

                    jsonObject.protocol = 'signUp';
                    jsonObject.userEmail = email;
                    jsonObject.pwd = pwd;
                    jsonObject.userName = userName;
                    jsonObject.year = year;
                    jsonObject.month = month;
                    jsonObject.day = day;
                    jsonObject.gender = gender;
                    jsonObject.userBio = userBio;
                    jsonObject.location = location;
                    jsonObject.region = region;
                    jsonObject.country=country;
                    jsonObject.state = state;
                    jsonObject.city = city;
                    jsonObject.streetAddress = streetAddress;

                    if(social !== null && social !== undefined && social !== '')
                    {
                        if(social === 'googleSignUp')
                        {
                            jsonObject.googleID = socialId;
                        }

                        if(social === 'facebookSignUp')
                        {
                            jsonObject.facebookID = socialId;
                        }

                        if(social === 'appleSignUp')
                        {
                            jsonObject.appleID = socialId;
                        }
                    }

                    // 이미지 업로드 파일 체크
                    if(document.getElementById('uploadImg').files.length > 0)
                    {
                        jsonObject.thumbNail = saveFileToServer('uploadImg').filePath;
                        console.log(JSON.stringify(jsonObject.thumbNail));
                    }
                    else
                    {
                        jsonObject.thumNail = null;
                    }
                    
                    // facebook, apple 회원가입시
                    if(document.getElementById('social'))
                    {
                        if(social === 'facebookSignUp' || social === 'appleSignUp')
                        {
                            facebookAppleDuplicate(jsonObject);
                        }
                        // google 회원가입시
                        else
                        {
                            protocolSendAjaxWithCallBack(jsonObject, function(result){
                                login(jsonObject.userEmail, jsonObject.pwd);
                            });
                        }
                    }
                    else
                    {
                        protocolSendAjaxWithCallBack(jsonObject, function(result){
                            login(jsonObject.userEmail, jsonObject.pwd);
                        });
                    }
                }
    
    $(document).ready(function(){
        var user = <%-user ? JSON.stringify(user) : {}%>;
        if(user.hasOwnProperty('userName')){
            // var user = JSON.parse('<%- JSON.stringify(user) %>');
            var afterLogin = document.getElementById('myInfo');
            afterLogin.classList.add('active')
            var beforeLogin = document.getElementById('signIn');
            beforeLogin.classList.remove('active');
            document.getElementById('userName').innerHTML=user.userName;
            document.getElementsByClassName('loginBar')[0].style.display="";
            console.log(document.getElementsByClassName('loginBar')[0])
        }else{
            document.getElementsByClassName('loginBar')[0].style.display="none";
            var afterLogin = document.getElementById('myInfo');
            afterLogin.classList.remove('active')
            var beforeLogin = document.getElementById('signIn');
            beforeLogin.classList.add('active');
        }

    });

    function checkDuplicate(){
        var userEmail = document.getElementById('email').value;
        var jsonObject = {};

        document.querySelector('.chkEmail-0 .wrongMessage-text').style.display = 'none';
        document.querySelector('.chkEmail-1 .wrongMessage-text').style.display = 'none';

        if(!emailChk.test(userEmail))
                {
                    // alert('이메일 형식이 잘못되었습니다.')
                    document.querySelector('.chkEmail-0 .wrongMessage-text').innerText = '이메일 형식이 잘못되었습니다.'
                    document.querySelector('.chkEmail-0 .wrongMessage-text').style.display = 'block';
                    failList.push(userEmail);
                    return false;
                }
                
        jsonObject.protocol = 'checkDuplicate';
        jsonObject.userEmail = userEmail;
        protocolSendAjaxWithCallBack(jsonObject, function(result)
        {
            if(result.resultCode == 0)
            {
                // alert('사용가능한 이메일입니다.');
                document.querySelector('.chkEmail-1 .wrongMessage-text').style.display = 'block';
                var lastVal = document.getElementById('getCanEmail').value = userEmail;
            }
            else
            {
                // alert('이미 사용중인 이메일입니다.');
                document.querySelector('.chkEmail-0 .wrongMessage-text').innerText = '<%=translation.loginAndJoin.This_email_is_already_in_use %>';
                document.querySelector('.chkEmail-0 .wrongMessage-text').style.display = 'block';
                return false;
            }
        });
    }

    function facebookAppleDuplicate(signObject){
        var userEmail = document.getElementById('getEmail').value;
        var jsonObject = {};

        if(!emailChk.test(userEmail))
        {
            alert('이메일 형식이 잘못되었습니다.');
            return false;
        }
                
        jsonObject.protocol = 'checkDuplicate';
        jsonObject.userEmail = userEmail;
        protocolSendAjaxWithCallBack(jsonObject, function(result){
            if(result.resultCode==0)
            {
                // alert('사용가능한 이메일입니다.')
                signObject.userEmail = userEmail;

                protocolSendAjaxWithCallBack(signObject, function(result){
                    login(signObject.userEmail, signObject.pwd);
                });
            }
            else
            {
                alert('이미 사용중인 이메일입니다.');
                return false;
            }
        });

        console.log('get email : ' + userEmail);
    }

    //비밀번호 찾기 이벤트
    function findPwdNext()
    {
        var checkEmail = document.getElementById('findPwdEmailInput'); //사용하고있는 이메일
        var errorCheck = document.querySelector('.innerContent-findPwd .wrongMessage-email'); //오류
        var userEmail = checkEmail.value;
       

        // if(!emailChk.test(checkEmail))
        // {
        //     errorCheck.innerText = '이메일 형식이 잘못되었습니다.';
        //     errorCheck.style.display = 'block';
       
        // }


        //테스트용 조건값임 변경요망, 이메일 중복체크 이벤트 사용시 이 if문 사용해주세요

        var jsonObject ={}
        jsonObject.protocol = 'checkDuplicate';
        jsonObject.userEmail = userEmail;
        protocolSendAjaxWithCallBack(jsonObject, function(result){
           if(result.resultCode==0){
                errorCheck.innerText = '<%=translation.loginAndJoin.We_weren_t_able_to_identify_you_given_the_information_provided%>';
                errorCheck.style.display = 'block';
            }
            else
            {
                var emailJsonObject ={};
                emailJsonObject.protocol = 'sendEmail';
                emailJsonObject.userEmail = userEmail;
                emailJsonObject.purpose = '비밀번호 찾기'
                protocolSendAjaxWithCallBack(emailJsonObject, function(result){
                    console.log('after send email')
                    console.log(JSON.stringify(result));
                    errorCheck.style.display = 'none';
                    document.getElementById('allContents').innerHTML =getInputOtpHtml(userEmail, result.message);
                })
                
            }
        
        })

    }

    //OTP 체크
    function OTPvalidate()
    {
        var otpVal = document.getElementById('otpvalue');
        var email = document.getElementById('emailAddr').innerHTML;
        var uid = document.getElementById('userNumPassFind').value;
        var errorCheck = document.querySelector('.innerContent-inputOtp .wrongMessage-email');
        console.log(email+'get email ' + otpVal.value)
        var jsonObject ={};
        jsonObject.protocol = 'OTPValidate';
        jsonObject.otpVal = otpVal.value;
        jsonObject.userEmail = email;
        jsonObject.userUid = uid    
        protocolSendAjaxWithCallBack(jsonObject, function(result){
            if(result.resultCode == 0){
                console.log('pass');
                errorCheck.style.display = 'none';
                document.getElementById('allContents').innerHTML = insertNewPassword(email);
            }
            else
            {
                errorCheck.style.display = 'block';
            }
        });
    }

    //새 비밀번호 변경
    function setNewPassword(userEmail)
    {
        var newPasswordVal = $('#newPassword').val();
        var newPasswordReVal = $('#newPasswordRe').val();

        //두개다 8자리이상 인지 체크
        if(newPasswordVal.length >= 8 && newPasswordReVal.length >= 8)
        {
            $('.chkNewChar > span').removeClass('danger');
        }
        else
        {
            $('.chkNewChar > span').addClass('danger');
        }

        //두개 동일한지 체크
        if(newPasswordVal == newPasswordReVal)
        {
            $('.chkNewPwd > span').removeClass('active');
        }
        else
        {
            $('.chkNewPwd > span').addClass('active');
        }

        var pwCheck = /^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)[a-zA-Z\d]{8,}$/;

        if(!pwCheck.test(newPasswordVal)) {
            $('.fixMessage').addClass('active');
            return false;
        }

        var newPw = document.getElementById('newPassword'); //변경할 새 비밀번호
        var newPwCheck = document.getElementById('newPasswordRe'); //변경할 새 비밀번호 확인
        var matchCheck = document.querySelector('.innerContent-inputNewPwd .wrongMessage-pwd');
        var errorcheck = document.querySelector('.innerContent-inputNewPwd .wrongMessage-text');
        var modalFindPassword = document.querySelector('.modal.modal100');
        var newPwd =SHA256(newPw.value);

        var jsonObject = {};
        jsonObject.protocol = 'changePw';
        jsonObject.userEmail = userEmail;
        jsonObject.newPw = newPwd;

        // 비밀번호, 비밀번호 확인이 일치할 경우
        if(newPw.value === newPwCheck.value)
        {
            protocolSendAjaxWithCallBack(jsonObject, function(result)
            {
                // 비밀번호 변경 완료 후 작업
                if(result.resultCode == 0)
                {
                    alert('비밀번호 변경이 완료되었습니다.');
                    modalFindPassword.style.display = 'none';
                }
            })
            errorcheck.style.display = 'none';
        }
        else
        {
            matchCheck.style.display = 'block';
            // errorcheck.style.display = 'block';
        }
    }
    
    function chkPW()
    {

        var pw = $("#regpassword").val();
        var id = $("#email").val();
            
        var reg = /^(?=.*?[A-Z])(?=.*?[a-z])(?=.*?[0-9])(?=.*?[#?!@$%^&*-]).{8,}$/;
        var hangulcheck = /[ㄱ-ㅎ|ㅏ-ㅣ|가-힣]/;
        
        if(false === reg.test(pw)) {
        alert('비밀번호는 8자 이상이어야 하며, 숫자/대문자/소문자/특수문자를 모두 포함해야 합니다.');
        }else if(/(\w)\1\1\1/.test(pw)){
        alert('같은 문자를 4번 이상 사용하실 수 없습니다.');
        return false;
        }else if(pw.search(id) > -1){
        alert("비밀번호에 아이디가 포함되었습니다.");
        return false;
        }else if(pw.search(/\s/) != -1){
        alert("비밀번호는 공백 없이 입력해주세요.");
        return false;
        }else if(hangulcheck.test(pw)){
        alert("비밀번호에 한글을 사용 할 수 없습니다."); 
        }else {
        console.log("통과");
        }

    }


    function checkisUserHostInheader(){
                
        var user = <%-user ? JSON.stringify(user) :{} %>;

        var jsonObject ={}
        jsonObject.protocol = 'checkIsHost';
        jsonObject.userEmail = user.userEmail;
        var isHost = 'not';
            protocolSendAjaxWithCallBack(jsonObject, function(result){
                console.log('comecheck' + result.resultCode);
            if(result.resultCode==0){
                        var params = new URL(location.href);
                        var lang = params.searchParams.get("clang");

                        if(lang !== null)
                        {
                            urlLang = '?clang=' + lang;
                        }
                        else
                        {
                            var urlLang = '';
                        }

                        window.open('/hostStudio' + urlLang);
                }else{
                    window.location.href='/hostMain?become=host';
                }
            
        })
    }

    function followUser(userUID, userName, userType, e){
                    console.log(e.classList.contains('active'))
                    var jsonObject = {};
                    if(e.classList.contains('followed')||e.classList.contains('active')){
                        jsonObject.protocol = 'removeFollow';
                        e.classList.remove('followed');
                        // e.classList.remove('active');
                    }else{
                        jsonObject.protocol = 'followUser';
                        e.classList.add('followed')
                    }
                    jsonObject.targetUID = userUID;
                    jsonObject.targetName = userName;
                    jsonObject.targetType = userType;
                    protocolSendAjaxWithCallBack(jsonObject, function(result){
                        console.log(result);
                    })
                }
    
    userSearchResultBoxAppendHtmlFun(userSearchResult);

    function userSearchResultBoxAppendHtmlFun(userSearchResult) {
        document.getElementById('userSearchResultAppendID').innerHTML = '';

        for(var i = userSearchResult.length - 1; i >= 0; i--) {
            var searchResultHtml = `
                <li id="resultIndex${i}">
                    <a href="javascript:void(0)" onclick="getRecentKeywordFunc(this)">${userSearchResult[i]}</a>
                    <button onclick="removeResult(this)">
                        <i class="xi-close-thin"></i>    
                    </button>
                </li>
            `;

            document.getElementById('userSearchResultAppendID').innerHTML += searchResultHtml;
        }
    }

    function removeResult(e, removeType) {
        if(removeType == 'all') {
            userSearchResult = [];
        } else {
            var removeIndex = $(e).parent().attr('id').replaceAll('resultIndex', '');
            (userSearchResult).splice(removeIndex, 1);
        }

        var sendObject = {};
        sendObject.userSearchResult = userSearchResult;
        $.ajax({
            type : "POST",
            url:"/userSearchHistoryRemove",
            data: JSON.stringify(sendObject),
            processData: false,
            contentType: "application/json; charset=UTF-8",
            success : function(data){
                userSearchResultBoxAppendHtmlFun(data);
            },
            error : function(error)
            {
            }
        });
    }

    function getRecentKeywordFunc(e) {
        var getKeyword = e.innerText;
        document.getElementById('headerSearchInput').value = getKeyword;
    }
        
</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/hammer.js/2.0.8/hammer.min.js" integrity="sha512-UXumZrZNiOwnTcZSHLOfcTs0aos2MzBWHXOHOuB0J/R44QB0dwY5JgfbvljXcklVf65Gc4El6RjZ+lnwd2az2g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script> <!--hammer.js-->