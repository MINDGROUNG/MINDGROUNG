<%
    //----------------공지사항 등록,수정 페이지----------------

    //**************************************************
    // 공지사항 데이터 (입력값은 컬럼명을 정확하게 Input 태그의 Id 값으로 넣어줌)
    // -------------------------------------------------
    // noticeUID :  기본키
    // state :      상태값 (0: 노출중, 1: 삭제)
    // title :      제목 (입력값)
    // contents :   내용 (입력값)
    // regDate :    작성일
    // uptDate :    수정일
    //**************************************************
    /*let notice = {
        'noticeUID': 1,
        'state': 0,
        'title': 'test1',
        'contents': 'test1',
        'regDate': '2021-07-15 00:00:00',
        'uptDate': '2021-07-15 00:00:00'
    };*/
    
    //**************************************************
    // 등록, 수정 상태값 (0: 등록, 1: 수정)
    //**************************************************
    //let state = 0;

    //**************************************************
    // 사용 함수
    //**************************************************
    // 공지사항 등록 함수
    // insertNotice()
    
    // 공지사항 수정 함수
    // updateNotice(notice.noticeUID)
%>

<!DOCTYPE html>
<html lang="ko">
    <%-include common/commonHead.html%>
    <body>
        <%-include common/commonHeader.html%>
        <!-- //////////////////////////////////////////////////////////////////////////// -->
        <!-- START CONTENT -->
        <div class="content">
            <!-- Start Page Header -->
            <div class="page-header">
                <h1 class="title">Blank Page</h1>
                <ol class="breadcrumb">
                    <li><a href="index.html">Dashboard</a></li>
                    <li><a href="#">Extra Pages</a></li>
                    <li class="active">Blank Page</li>
                </ol>

                <!-- End Page Header Right Div -->
            </div>
            <!-- End Page Header -->
            <div class="row presentation">

                <div class="col-lg-8 col-md-6 titles">
                    <span class="icon color8-bg"><i class="fa fa-pencil"></i></span>
                    <h1>샘플 레이아웃</h1>
                    <h4>추가가 필요한 레이아웃은 요청하기</h4>
                </div>
            
                <div class="col-lg-4 col-md-6">
                    <ul class="list-unstyled list">
                        <li><i class="fa fa-check"></i>컴포넌트 주석별 나눔</li>
                        <li><i class="fa fa-check"></i>플러그인 사용예시 추가</li>
                    </ul>
                </div>
            </div>
            <!-- //////////////////////////////////////////////////////////////////////////// -->
            <!-- START CONTAINER -->
            <div class="container-default">
                <div class="row">
                    <div class="col-md-12">
                        <div class="panel panel-default">
                            <div class="panel-title">
                                <%if(state==0){%> 공지사항 등록 <%}else{%> 공지사항 수정 <%}%>
                                <ul class="panel-tools">
                                    <li>
                                        <a class="icon minimise-tool"><i class="fa fa-minus"></i></a>
                                    </li>
                                    <li>
                                        <a class="icon expand-tool"><i class="fa fa-expand"></i></a>
                                    </li>
                                </ul>
                            </div>

                            <div class="panel-body">
                                <form class="form-horizontal">
                                    <div class="form-group">
                                        <label class="col-sm-2 control-label form-label">제목</label>
                                        <div class="col-sm-10">
                                            <input id="title" type="text" class="form-control" data-check="0" value="<%-state==0?'':notice.title%>"/>
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label class="col-sm-2 control-label form-label">본문</label>
                                        <div class="col-sm-10">
                                            <textarea id="textAreaColumn" class="form-control" rows="3" placeholder="Type your message..." data-check="0"><%-state==0?'':notice.contents%></textarea>
                                        </div>
                                    </div>
                                    <%if(state==0){%>
                                        <button type="button" class="btn btn-default pluginSaveForm" onclick="insertNotice()">등록</button>
                                    <%}else{%>
                                        <button type="button" class="btn btn-default pluginSaveForm" onclick="updateNotice('<%=notice.noticeUID%>')">수정</button>
                                    <%}%>
                                    <button type="button" class="btn btn-danger">취소</button>
                                    <button type="button" class="btn btn-primary">돌아가기</button>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- END CONTAINER -->
            <!-- //////////////////////////////////////////////////////////////////////////// -->

            <%-include common/commonFooter.html%>
        </div>
        <!-- End Content -->
        <!-- //////////////////////////////////////////////////////////////////////////// -->

        <%-include common/commonScript.html%>
        <script>
            //=====================================
            // 저장
            //-------------------------------------
            $('.saveForm').click(function()
            {
                if(true)
                // if(isValidationInput())
                {
                    saveFunc();
                }
            })

            function saveFunc() 
            {
                var data = {};

                //텍스트
                var textColumn = $('#textColumn').val();
                data.textColumn = textColumn;

                //텍스트 동적생성
                var listText = $('.listTextColumn');
                if(!listText) listText = [];
                var listTextColumn = [];
                for(var i=0; i<listText.length; i++)
                {
                    var text = listText[i];
                    listTextColumn.push($(text).val());
                }
                data.listTextColumn = listTextColumn;

                //텍스트에어리어
                var textAreaColumn = $('#textAreaColumn').val();
                data.textAreaColumn = textAreaColumn;
                
                //텍스트에어리어 동적생성
                var listTextArea = $('.listTextAreaColumn');
                if(!listTextArea) listTextArea = [];
                var listTextAreaColumn = [];
                for(var i=0; i<listTextArea.length; i++)
                {
                    var textArea = listTextArea[i];
                    listTextAreaColumn.push($(textArea).val());
                }
                data.listTextAreaColumn = listTextAreaColumn;

                //셀렉트 박스
                var selectColumn = $('#selectColumn').val();
                data.selectColumn = selectColumn;

                //체크 박스
                var listCheckBox = $('.checkColumn');
                if(!listCheckBox) listCheckBox = [];
                var checkColumn = [];
                for(var i=0; i<listCheckBox.length; i++)
                {
                    var checkBox = listCheckBox[i];
                    if(checkBox.checked == true)
                    {
                        checkColumn.push(checkBox.value);
                    }
                }
                data.checkColumn = checkColumn;

                //체크 박스 인라인
                var listInlineCheckBox = $('.checkInlineColumn');
                if(!listInlineCheckBox) listInlineCheckBox = [];
                var checkInlineColumn = [];
                for(var i=0; i<listInlineCheckBox.length; i++)
                {
                    var checkBox = listInlineCheckBox[i];
                    if(checkBox.checked == true)
                    {
                        checkInlineColumn.push(checkBox.value);
                    }
                }
                data.checkInlineColumn = checkInlineColumn;

                //라디오 박스
                var radioColumn = $(':radio[name="radioColumn"]:checked').val();
                data.radioColumn = radioColumn;

                //파일 셀렉트
                var file = document.getElementById('fileColumn');
                var fileColumn;
                if(file.files.length > 0)
                {
                    fileUpload(file, function(listFileInfo)
                    {
                        fileColumn = listFileInfo[0];
                    })
                }
                data.fileColumn = fileColumn;

                //파일 셀렉트 동적생성
                var listFile = document.getElementsByClassName('listFileColumn');
                if(!listFile) listFile = [];
                var listFileColumn = [];
                for(var i=0; i<listFile.length; i++)
                {
                    var file = listFile[i];
                    if(0 < file.files.length)
                    {
                        fileUpload(file, function(listFileInfo)
                        {
                            listFileColumn.push(listFileInfo[0]);
                        })
                    }
                }
                data.listFileColumn = listFileColumn;

                //파일 셀렉트 미리보기
                var fileView = document.getElementById('fileViewColumn');
                var fileViewColumn;
                if(fileView.files.length > 0)
                {
                    fileUpload(fileView, function(listFileInfo)
                    {
                        fileViewColumn = listFileInfo[0];
                    })
                }
                data.fileViewColumn = fileViewColumn;

                //파일 셀렉트 미리보기 동적생성
                var listFileView = document.getElementsByClassName('listFileViewColumn');
                if(!listFileView) listFileView = [];
                var listFileViewColumn = [];
                for(var i=0; i<listFileView.length; i++)
                {
                    var fileView = listFileView[i];
                    if(0 < fileView.files.length)
                    {
                        fileUpload(fileView, function(listFileInfo)
                        {
                            listFileViewColumn.push(listFileInfo[0]);
                        })
                    }
                }
                data.listFileViewColumn = listFileViewColumn;

                data.protocol = 'sampleAjax';
                var successCallBack = function(result){
                    if(result.resultCode == 0)
                    {
                        alert('저장되었습니다.');
                    }
                    else
                    {
                        alert(result.message);
                    }
                };

                protocolSendAjaxWithCallBack(data, successCallBack);
            }
            
            //=====================================
            // 플러그인 입력값 저장
            //-------------------------------------
            $('.pluginSaveForm').click(function()
            {
                if(true)
                // if(isValidationInput())
                {
                    pluginSaveFunc();
                }
            })

            function pluginSaveFunc() 
            {
                var data = {};

                //데이트피커
                var dateColumn = $('#dateColumn').val();
                data.dateColumn = dateColumn;

                //데이트 래인지피커
                var dateRange = $('#dateRange').val();
                data.startDateColumn = dateRange.substring(0, 10);
                data.endDateColumn = dateRange.substring(13, 23);
                
                //CK 에디터
                var editorColumn1 = CKEDITOR.instances['editorColumn1'].getData();
                var editorColumn2 = CKEDITOR.instances['editorColumn2'].getData();
                data.editorColumn1 = editorColumn1;
                data.editorColumn2 = editorColumn2;

                //해시태그
                var tagsColumn = $('#tagsColumn').val().split(',');
                data.tagsColumn = tagsColumn;
                
                data.protocol = 'sampleAjax';
                var successCallBack = function(result){
                    if(result.resultCode == 0)
                    {
                        alert('저장되었습니다.');
                    }
                    else
                    {
                        alert(result.message);
                    }
                };

                protocolSendAjaxWithCallBack(data, successCallBack);
            }
        </script>
    </body>
</html>
